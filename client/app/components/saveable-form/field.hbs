{{#let (get @saveableChanges @attribute) (get @submittableChanges (concat 'error.' @attribute)) as |value error|}}
  {{#if hasBlock}}
    {{!-- Yield the component so more args can be added --}}
    {{yield (component (concat 'saveable-form/field/' (if @type @type 'text-input'))
      value=value
      data-test-input=@attribute
    )}}
  {{else}} 
    {{!-- Without a block, just invoke it --}}
    {{!-- Use let helper here so we can use attributes spread for selectors --}}
    {{#let (component (concat 'saveable-form/field/' (if @type @type 'text-input'))) as |InlineInvocation|}}
      <InlineInvocation
        @value={{value}}
        data-test-input={{@attribute}}
        ...attributes
      />
    {{/let}}
  {{/if}}

  {{#if error}}
    <ValidationMessage
      @changesetError={{error}}
      data-test-validation-message={{@attribute}}
    />
  {{/if}}

  {{#if @showCounter}}
    <CharacterCounter
      @string={{value}}
      @maxlength={{@maxlength}}
    />
  {{/if}}
{{/let}}
