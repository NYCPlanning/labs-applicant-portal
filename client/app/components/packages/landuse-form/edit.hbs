<SaveableForm
  @model={{@package.landuseForm}}
  @validators={{array this.validations.SaveableLanduseFormValidations this.validations.SubmittableLanduseFormValidations}}
  as |saveableForm|
>

  <div class="grid-x grid-margin-x">
    <div class="cell large-8">

      <section class="form-section">
        <h1 class="header-large">
          Land Use
        </h1>

        <Packages::LanduseForm::ProjectInformation
          @form={{saveableForm}}
          @validations={{this.validations}}
        />
      </section>

      <Packages::LanduseForm::PrimaryContact
        @form={{saveableForm}}
      />

      <Packages::LanduseForm::SiteInformation
        @form={{saveableForm}}
      />

      <Packages::ApplicantTeam
        @form={{saveableForm}}
        @addApplicant={{this.addApplicant}}
        @removeApplicant={{this.removeApplicant}}
        @validations={{this.validations}}
      />

      <Packages::LanduseForm::ProjectArea
        @form={{saveableForm}}
      />

      {{#if (and
        (eq saveableForm.data.dcpWholecity (optionset 'landuseForm' 'dcpWholecity' 'code' 'NO'))
        (eq saveableForm.data.dcpEntiretyboroughs (optionset 'landuseForm' 'dcpEntiretyboroughs' 'code' 'NO'))
        (eq saveableForm.data.dcpEntiretycommunity (optionset 'landuseForm' 'dcpEntiretycommunity' 'code' 'NO'))
        (eq saveableForm.data.dcpNotaxblock (optionset 'landuseForm' 'dcpNotaxblock' 'code' 'NO'))
      )}}
        <Packages::LanduseForm::ProposedDevelopmentSite
          @form={{saveableForm}}
        />

        <Packages::LanduseForm::ProjectTaxLots
          @form={{saveableForm}}
          @removeBbl={{this.removeBbl}}
        />
      {{/if}}

      <Packages::LanduseForm::EnvironmentalReview
        @form={{saveableForm}}
      />

      <Packages::LanduseForm::ProposedActions
        @form={{saveableForm}}
        @validations={{this.validations}}
      />

      <Packages::RelatedAction
        @form={{saveableForm}}
        @addRelatedAction={{this.addRelatedAction}}
        @removeRelatedAction={{this.removeRelatedAction}}
        @validations={{this.validations}}
      />

      {{#let (intersect
        (map-by "dcpActioncode" this.landuseForm.landuseActions)
        (array 'HA' 'HC' 'HD' 'HG' 'HN' 'HO' 'HP' 'HU')
      ) as |projectHousingActions|}}
        {{#if (gt projectHousingActions.length 0)}}
          <Packages::LanduseForm::HousingPlans
            @form={{saveableForm}}
          />
        {{/if}}
      {{/let}}

      <Packages::LanduseForm::AttachedDocuments
        @form={{saveableForm}}
        @model={{@package.landuseForm}}
      />
    </div>
    <div class="cell large-4 sticky-sidebar">
      <saveableForm.PageNav>
        <saveableForm.SaveButton
          @isEnabled={{or this.packageIsDirtyOrRecordsDeleted saveableForm.isSaveable}}
          @onClick={{this.savePackage}}
          data-test-save-button
        />

        <saveableForm.SubmitButton
          @isEnabled={{saveableForm.isSubmittable}}
          class="secondary"
          data-test-submit-button
        />
      </saveableForm.PageNav>

      <saveableForm.ConfirmationModal
        @action={{component saveableForm.SubmitButton
          onClick=this.submitPackage
          isEnabled=saveableForm.isSubmittable
          class="no-margin"
        }}
        @footer={{component 'packages/landuse-form/landuse-form-error'
          package=@package
        }}
        @continueButtonTitle="Continue Editing"
        data-test-confirm-submit-button={{true}}
      >
        <h6>Confirm Draft Land Use Form Submission</h6>
        <p class="header-large medium-margin-top small-margin-bottom">
          Are you sure?
        </p>
        <p>
          Before submitting, ensure that your answers are accurate and complete,
          and that necessary attachments have been uploaded.
          If NYC Planning does not receive enough accurate information,
          the Lead Planner will notify you and request that this form be
          resubmitted with necessary materials, corrections, or clarifications.
        </p>
      </saveableForm.ConfirmationModal>
    </div>
  </div>
</SaveableForm>
