<fieldset class="fieldset relative" ...attributes>
  <legend data-test-applicant-title="{{@applicant.friendlyEntityName}}">
    <strong>
      {{@applicant.friendlyEntityName}}
    </strong>
  </legend>

  {{!-- if sent to CRM "Applicant Information" table, need to know "type" --}}
  {{#if (eq @applicant.friendlyEntityName "Applicant")}}
    <div class="cell medium-6" data-test-applicant-type-radio-group>
      <RadioButton
        @value={{717170000}}
        @groupValue={{@applicant.dcpType}}
        data-test-applicant-type-radio-individual
      >
        Individual
      </RadioButton>
      <RadioButton
        @value={{717170001}}
        @groupValue={{@applicant.dcpType}}
        data-test-applicant-type-radio-organization
      >
        Organization
      </RadioButton>
    </div>
  {{/if}}

  {{!-- and if the applicant is on behalf of an organization, we need to know which organization --}}
  {{#if (eq @applicant.dcpType 717170001)}}
    <label data-test-applicant-organization>
      Organization
      <TextInput
        @property={{@applicant.dcpOrganization}}
        @changesetError={{@parentForm.submittableChanges.error.dcpOrganization}}
      />
    </label>
    <hr/>
    <h5>Authorized Organization Representative</h5>
  {{/if}}

  <div class="grid-x grid-margin-x">
    <div class="cell medium-6">
      <label>First Name</label>
      <TextInput
        @property={{@applicant.dcpFirstname}}
        @changesetError={{@parentForm.submittableChanges.error.dcpFirstname}}
      />
    </div>
    <div class="cell medium-6">
      <label>Last Name</label>
        <TextInput
          @property={{@applicant.dcpLastname}}
          @changesetError={{@parentForm.submittableChanges.error.dcpLastname}}
        />
    </div>
  </div>

  {{!-- always allow input for Other Team Members --}}
  {{#if (eq @applicant.friendlyEntityName "Other Team Member")}}
    <label>
      Organization
      <TextInput
        @property={{@applicant.dcpOrganization}}
        @changesetError={{@parentForm.submittableChanges.error.dcpOrganization}}
      />
    </label>
  {{/if}}

  <label>
    Email Address
    <Input type="email" @value={{@applicant.dcpEmail}}/>
      <ValidationMessage
        @changesetError={{@parentForm.submittableChanges.error.dcpEmail}}
      />
  </label>
  <label>Address <TextInput
    @property={{@applicant.dcpAddress}}
    @changesetError={{@parentForm.submittableChanges.error.dcpAddress}}
  /></label>

  <div class="grid-x grid-margin-x">
    <div class="cell medium-auto">
      <label>City <TextInput
        @property={{@applicant.dcpCity}}
        @changesetError={{@parentForm.submittableChanges.error.dcpCity}}
      /></label>
    </div>
    <div class="cell auto medium-2">
      <label data-test-applicant-state-dropdown>
        State
        <PowerSelect
          supportsDataTestProperties={{true}}
          @selected={{@applicant.dcpState}}
          @placeholder="state"
          @searchEnabled={{true}}
          @searchField="label"
          @options={{this.stateOptions}}
          @onchange={{fn this.updateAttr @applicant 'dcpState'}}
        as |stateCode|>
          {{optionset 'applicant' 'state' 'label' stateCode}}
        </PowerSelect>
      </label>
    </div>
    <div class="cell auto medium-4">
      <label>ZIP <TextInput
        @property={{@applicant.dcpZipcode}}
        @changesetError={{@parentForm.submittableChanges.error.dcpZipcode}}
      /></label>
    </div>
  </div>

  <label>Phone <TextInput
    @value={{@applicant.dcpPhone}}
    @changesetError={{@parentForm.submittableChanges.error.dcpPhone}}
  /></label>

  <button
    type="button"
    class="delete-fieldset"
    {{on "click" (fn @removeApplicant @applicant)}}
    data-test-remove-applicant-button
  >
    Remove {{@applicant.friendlyEntityName}}
    <FaIcon @icon="times" @prefix="fas" @fixedWidth={{true}} />
  </button>

</fieldset>
