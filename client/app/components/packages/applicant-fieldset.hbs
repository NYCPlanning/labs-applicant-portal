<SaveableForm
  @model={{@applicant}}
  @validators={{array this.saveableApplicantFormValidations this.submittableApplicantFormValidations}}
  @onSave={{@saveApplicant}}
  @onSubmit={{@submitApplicant}}
  as |saveable-form|
>

  <fieldset class="fieldset relative" ...attributes>
    <legend data-test-applicant-title="{{saveable-form.saveableChanges.friendlyEntityName}}">
      <strong>
        {{saveable-form.saveableChanges.friendlyEntityName}}
      </strong>
    </legend>

    {{!-- if sent to CRM "Applicant Information" table, need to know "type" --}}
    {{#if (eq saveable-form.saveableChanges.friendlyEntityName "Applicant")}}
      <div class="cell medium-6" data-test-applicant-type-radio-group>
        <RadioButton
          @value={{717170000}}
          @groupValue={{saveable-form.saveableChanges.dcpType}}
          data-test-applicant-type-radio-individual
        >
          Individual
        </RadioButton>
        <RadioButton
          @value={{717170001}}
          @groupValue={{saveable-form.saveableChanges.dcpType}}
          data-test-applicant-type-radio-organization
        >
          Organization
        </RadioButton>
      </div>
    {{/if}}

    {{!-- and if the applicant is on behalf of an organization, we need to know which organization --}}
    {{#if (eq saveable-form.saveableChanges.dcpType 717170001)}}
      <label data-test-applicant-organization>
        Organization
        <Input
          type="text"
          @value={{saveable-form.saveableChanges.dcpOrganization}}
        />
      </label>
      <hr/>
      <h5>Authorized Organization Representative</h5>
    {{/if}}

    <div class="grid-x grid-margin-x">
      <div class="cell medium-6">
        <label>First Name</label>
        <Input
          type="text"
          @value={{saveable-form.saveableChanges.dcpFirstname}}
          data-test-input="dcpFirstname"
        />
        <ValidationMessage
          @changesetError={{saveable-form.submittableChanges.error.dcpFirstname}}
        />
      </div>
      <div class="cell medium-6">
        <label>Last Name</label>
          <Input
            type="text"
            @value={{saveable-form.saveableChanges.dcpLastname}}
          />
        <ValidationMessage
          @changesetError={{saveable-form.submittableChanges.error.dcpLastname}}
        />
      </div>
    </div>

    {{!-- always allow input for Other Team Members --}}
    {{#if (eq saveable-form.saveableChanges.friendlyEntityName "Other Team Member")}}
      <label>
        Organization
        <Input
          type="text"
          @value={{@applicant.dcpOrganization}}
        />
      </label>
    {{/if}}

    <label>Email Address <Input type="email" @value={{saveable-form.saveableChanges.dcpEmail}}/></label>
    <ValidationMessage
      @changesetError={{saveable-form.submittableChanges.error.dcpEmail}}
    />
    <label>Address <Input type="text" @value={{saveable-form.saveableChanges.dcpAddress}}/></label>

    <div class="grid-x grid-margin-x">
      <div class="cell medium-auto">
        <label>City <Input type="text" @value={{saveable-form.saveableChanges.dcpCity}}/></label>
      </div>
      <div class="cell auto medium-2">
        <label data-test-applicant-state-dropdown>
          State
          <PowerSelect
            supportsDataTestProperties={{true}}
            @selected={{@applicant.dcpState}}
            @placeholder="state"
            @searchEnabled={{true}}
            @searchField="label"
            @options={{this.stateOptions}}
            @onchange={{fn this.updateAttr @applicant 'dcpState'}}
          as |stateCode|>
            {{optionset 'applicant' 'state' 'label' stateCode}}
          </PowerSelect>
        </label>
      </div>
      <div class="cell auto medium-4">
        <label>ZIP <Input type="text" @value={{saveable-form.saveableChanges.dcpZipcode}}/></label>
      </div>
    </div>

    <label>Phone <Input type="text" @value={{saveable-form.saveableChanges.dcpPhone}}/></label>

    <button
      type="button"
      class="delete-fieldset"
      {{on "click" (fn @removeApplicant saveable-form.saveableChanges)}}
      data-test-remove-applicant-button
    >
      Remove {{@applicant.friendlyEntityName}}
      <FaIcon @icon="times" @prefix="fas" @fixedWidth={{true}} />
    </button>

  </fieldset>
</SaveableForm>